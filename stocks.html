<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INTERNATIONAL NEWS</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

    <link rel="stylesheet" href="same.css">


</head>
<body class="light-mode">
    <div class="heading">
        <div class="burger-icon">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
        <div>
            <h1>NEWSPAPER</h1>
            <h3>21-09-2024</h3>
        </div>
        <div class="toggle">
            <label class="theme-switch">
                <input type="checkbox" id="theme-toggle">
                <span class="slider"></span>
            </label><br>
            
        </div>
    </div>
    <br><br>
    <nav class="navbar">
        <ul class="nav-links">
            <li><a href="justin.html">Home</a></li>
            <li><a href="international.html">International</a></li>
            <li><a href="political.html">Political</a></li>
            <li><a href="sports.html">Sports</a></li>
            <li><a href="Crime.html">Crime</a></li>
            <li><a href="fashion.html">Fashion</a></li>
            <li><a href="agriculture.html">Agriculture</a></li>
            <li><a href="technical.html">Technical</a></li>
            <li><a href="climate.html">Climate</a></li>
            <li><a href="entertainment.html">Entertainment</a></li>
            <li><a href="games.html">Games</a></li>
            <li><a href="#">Help</a></li>
            <li><a href="education.html">Education</a></li>
        </ul>
    </nav>
    <br>
    <div class="search">
        <input type="text" placeholder="Search here...">
        <div class="btn">
    <button><img src="image_processing20210616-28547-1pw1efu.png" alt="trending" height="18px" width="18px"> Trending</button>
    <a href="spam.html" target="_blank"><button>Spam</button></a>
    <a href="exam.html" target="_blank"><button>Exams</button></a>

        </div>
    </div>
    <div class="topic">
        <img src="globe.png" alt="international" height="25px" width="25px">
        <h1>INTERNATIONAL NEWS</h1>
    </div>
    <br><br>
<hr>
<br>
<div class="content">
<div class="right-column">
<div class="news">
<div class="text">
    <b>Rahul Gandhi reacts to alleged use of 'animal fat' <br>in Tirupati Laddu:</b> <br><br>
<label>Thirumala Tirupati Devasthanams, which manages the temple, asserted there was presence <br>of 'Lard'(pig fat) and 
other impurities in the ghee, citing a lab report</label> 
</div>
<img src="maxresdefault.jpg" alt="laddoo" width="400px" height="180px">
</div>
<br><hr><br>
<div class="news">
    <div class="text">
        <b>Rahul Gandhi reacts to alleged use of 'animal fat' <br>in Tirupati Laddu:</b> <br><br>
    <label>Thirumala Tirupati Devasthanams, which manages the temple, asserted there was presence<br> of 'Lard'(pig fat) and 
    other impurities in the ghee, citing a lab report</label> 
    </div>
    <img src="maxresdefault.jpg" alt="laddoo" width="400px" height="180px">
    </div>
    <br><hr><br>
	</div>
	<div class="left-column">
<div class="news">
        <div class="text">
            <b>Rahul Gandhi reacts to alleged use of 'animal fat' <br>in Tirupati Laddu:</b> <br><br>
        <label>Thirumala Tirupati Devasthanams, which manages the temple, asserted there was presence <br>of 'Lard'(pig fat) and 
        other impurities in the ghee, citing a lab report</label> 
        </div>
        <img src="maxresdefault.jpg" alt="laddoo" width="400px" height="180px">
        </div>
        <br><hr><br>
        <div class="news">
            <div class="text">
                <b>Rahul Gandhi reacts to alleged use of 'animal fat' <br>in Tirupati Laddu:</b> <br><br>
            <label>Thirumala Tirupati Devasthanams, which manages the temple, asserted there was presence <br>of 'Lard'(pig fat) and 
            other impurities in the ghee, citing a lab report</label> 
            </div>
            <img src="maxresdefault.jpg" alt="laddoo" width="400px" height="180px">
            </div>
            <br><hr><br>
            <br><br>
			</div>
			</div>
        <div class="logo">
            <h3>Follow us on</h3>
         <a href=""><img src="instagram-logo.png" alt="insta" width="40px" height="40px"></a>
        <a href=""> <img src="facebook-logo-0.png" alt="insta" width="50px" height="50px"></a>
         <a href=""><img src="Twitter-Emblem.png" alt="insta" width="50px" height="30px"></a>
        </div>
        <br><br>
        <nav class="navbars">
            <ul class="navlinks">
                <li><a href="#">About</a></li>
                <li><a href="#">Contact Us</a></li>
                <li><a href="#">Help and Support</a></li>
            </ul>
        </nav>
        <br>
        <div class="chatbot-icon">
            <img src="chatbot.png" alt="Chatbot Icon" width="60" height="60">
        </div>
        <script src="same.js"></script><script src="load.js"></script></script>

<script>
function fetchNews() {
    const url = `http://localhost:5008/api/news/stocks`;
    fetch(url)
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            const articles = data.articles;

            // Shuffle articles to randomize the order
            const shuffledArticles = articles.sort(() => 0.5 - Math.random());

            // Get all news items in the DOM
            const newsItems = document.querySelectorAll('.news');

            shuffledArticles.forEach((article, index) => {
                if (newsItems[index]) {
                    newsItems[index].innerHTML = `
                        <div class="text" onclick="window.location.href='single.html?url=${encodeURIComponent(article.url)}'">
                            <b>${article.title}</b><br><br>
                            <label>${article.description}</label>
                        </div>
                        <img src="${article.image}" alt="news image" width="400px" height="180px">
                    `;
                }
            });

            // Handle remaining items if articles are less than news items
            for (let i = shuffledArticles.length; i < newsItems.length; i++) {
                newsItems[i].innerHTML = `
                    <div class="text">
                        <b>Fallback News Title</b><br><br>
                        <label>Fallback news description.</label>
                    </div>
                    <img src="maxresdefault.jpg" alt="fallback image" width="400px" height="180px">
                `;
            }
        })
        .catch(error => {
            console.error('Error fetching news:', error);
            const newsItems = document.querySelectorAll('.news');
            newsItems.forEach(item => {
                item.innerHTML = `
                    <div class="text">
                        <b>Fallback News Title</b><br><br>
                        <label>Fallback news description.</label>
                    </div>
                    <img src="maxresdefault.jpg" alt="fallback image" width="400px" height="180px">
                `;
            });
        });
}

// Fetch news on page load
document.addEventListener("DOMContentLoaded", () => {
    fetchNews();
    // Refresh news every 10 minutes (600000 milliseconds)
    setInterval(fetchNews, 600000);
});

// PDF Download Functionality
document.getElementById('download-btn').addEventListener('click', function() {
    const dateInput = document.getElementById('dateday').value;
    if (!dateInput) {
        alert("Please select a date.");
        return; // Exit if no date is selected
    }
    
    const date = new Date(dateInput);
    const formattedDate = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()}`;
    const category = 'INTERNATIONAL';
    const filename = `ASWAROODA_${formattedDate}_${category}.pdf`;

    // Create a new div to format for PDF
    const pdfContent = document.createElement('div');
    pdfContent.innerHTML = `
        <h1 style="text-align: center;">INTERNATIONAL NEWS - ${formattedDate}</h1>
        <div class="pdf-news-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 10px;">
            ${Array.from(document.querySelectorAll('.news')).map(news => {
                const title = news.querySelector('.text b') ? news.querySelector('.text b').innerHTML : 'No Title';
                const description = news.querySelector('.text label') ? news.querySelector('.text label').innerHTML : 'No Description';
                const imageSrc = news.querySelector('img') ? news.querySelector('img').src : 'maxresdefault.JPG'; // Corrected image reference
                return `
                    <div class="pdf-news" style="border: 1px solid #ccc; padding: 10px;">
                        <b>${title}</b><br>
                        <label>${description}</label><br>
                        <img src="${imageSrc}" alt="news image" style="width: 100%; height: auto;">
                    </div>
                `;
            }).join('')}
        </div>
    `;

    // Generate PDF
    html2pdf().from(pdfContent).set({
        margin: 1,
		useCORS: true,
        filename: filename,
        html2canvas: { scale: 2 },
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
    }).save();
});
</script>





<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

        </html>